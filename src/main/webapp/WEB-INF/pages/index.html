<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Simplist - Login</title>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/meyer-reset/2.0/reset.min.css">

    <link rel='stylesheet prefetch'
          href='https://fonts.googleapis.com/css?family=Roboto:400,100,300,500,700,900|RobotoDraft:400,100,300,500,700,900'>
    <link rel='stylesheet prefetch' href='https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css'>
    <link rel="stylesheet" href="../resources/css/style.css">
    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

    <!-- Optional theme -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">

    <!-- Latest compiled and minified JavaScript -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
</head>

<body>

<!-- Mixins-->
<!-- Pen Title-->
<div class="pen-title">
    <h1>Simplist</h1><span>Listing made simple</span>
</div>
<div class="container">
    <div class="card"></div>
    <div class="card">
        <h1 class="title">Login</h1>
        <form id="login" action="/dashboard" method="post">
            <div class="input-container">
                <input type="email" id="email" required="required"/>
                <label for="email">Email</label>
                <div class="bar"></div>
            </div>
            <div class="input-container">
                <input type="password" id="password" required="required"/>
                <label for="password">Password</label>
                <div class="bar"></div>
            </div>
            <div class="button-container">
                <button id="login_btn"><span>Go</span></button>
            </div>
        </form>
        <!--<div class="footer"><a href="#">Forgot your password?</a></div>-->
    </div>
    <div class="card alt">
        <div class="toggle"></div>
        <h1 class="title">Register
            <div class="close"></div>
        </h1>
        <form id="register">
            <div class="input-container">
                <input type="text" id="first_name" name="first_name" required="required"/>
                <label for="first_name">First Name</label>
                <div class="bar"></div>
            </div>
            <div class="input-container">
                <input type="text" id="last_name" name="last_name" required="required"/>
                <label for="last_name">Last Name</label>
                <div class="bar"></div>
            </div>
            <div class="input-container">
                <input type="email" id="new_email" name="new_email" required="required"/>
                <label for="new_email">Email</label>
                <div class="bar"></div>
            </div>
            <div class="input-container">
                <input type="password" id="new_password" name="new_password" required="required"/>
                <label for="new_password">Password</label>
                <div class="bar"></div>
            </div>
            <div class="button-container">
                <button type="submit" form="register" id="register_btn"><span>NEXT</span></button>
            </div>
        </form>
    </div>
</div>
<script src='https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js'></script>
<script src="//ajax.aspnetcdn.com/ajax/jquery.validate/1.9/jquery.validate.min.js"></script>
<script src="../resources/js/index.js"></script>
<script>
    $(document).ready(function () {
            $("#register").submit(function (event) {
                event.preventDefault();
                var url = "http://localhost:8080/";
                var newUser = {
                    firstName: $("#first_name").val(),
                    lastName: $("#last_name").val(),
                    email: $("#new_email").val(),
                    password: $("#new_password").val()
                };
                console.log(newUser);
                $.ajax({
                    type: "POST",
                    contentType:"application/json",
                    url: url + "login",
                    cache: false,
                    dataType: "json",
                    data: JSON.stringify(newUser),
                    success: function (response) {
                        if(response.title == "success"){
                            $("body").remove("#message");
                            $("body").prepend(
                                "<div id='message' class='alert alert-success' style='position: fixed; top: 0; right: 0;z-index: 5;'>" +
                                response.description+
                                "</div>"
                            );
                            $("#message").delay(2000).fadeOut(2000);
                        }
                        else if(response.title == "failure"){
                            $("body").remove("#message");
                            $("body").prepend(
                                "<div id='message' class='alert alert-danger' style='position: fixed; top: 0; right: 0;z-index: 5;'>" +
                                response.description+
                                "</div>"
                            );

                            $("#message").delay(2000).fadeOut(2000);
                        }
                    }
                })
            });
        }
    )
</script>
</body>
</html>
